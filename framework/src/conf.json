{
  "functors":[
    {
      "manager-comment":"manager配置"
    },
    {
      "name":"MainManager",
      "functor":"Manager",
      "comment":"管理算子，调度执行其它算子",
      "functors":"BeginManager,FeatureManager,RecallManager,FilterManager,SortManager,AdjustManager,ResortManager,PositionManager,EndManager",
      "config":{
        "open":1
      }
    },
    {
      "name":"BeginManager",
      "functor":"Manager",
      "comment":"串行执行一些准备工作，后边算子会依赖前边算子的输出",
      "functors":"GetToken,RequestToUserContext,ABExpParam",
      "config":{
        "open":1
      }
    },
    {
      "name":"FeatureManager",
      "functor":"Manager",
      "comment":"并行获取用户特征",
      "functors":"SexFeature,SessionFeature,SimpleFeature",
      "config":{
        "open":1,
        "mode":"parallel"
      }
    },
    {
      "name":"RecallManager",
      "functor":"Manager",
      "comment":"并行召回",
      "functors":"SimpleRedis,PosRecall,SessionRecall",
      "config":{
        "open":1,
        "mode":"parallel"
      }
    },
    {
      "name":"FilterManager",
      "functor":"Manager",
      "comment":"串行执行过滤",
      "functors":"BizFilter",
      "config":{
        "open":1
      }
    },
    {
      "name":"SortManager",
      "functor":"Manager",
      "comment":"排序",
      "functors":"PredictSort",
      "config":{
        "open":1,
        "mode":"cutoff"
      }
    },
    {
      "name":"AdjustManager",
      "functor":"Manager",
      "comment":"调权",
      "functors":"ChnAdjust1,ChnAdjust2",
      "config":{
        "open":1
      }
    },
    {
      "name":"ResortManager",
      "functor":"Manager",
      "comment":"重排",
      "functors":"SimpleResort",
      "config":{
        "open":1,
        "mode":"cutoff"
      }
    },
    {
      "name":"PositionManager",
      "functor":"Manager",
      "comment":"串行执行，前面算子优先占位，后边算子继续占剩余的位",
      "functors":"StrongPosition,ChnPosition,SimplePosition",
      "config":{
        "open":1,
        "mode":"cutoff"
      }
    },
    {
      "name":"EndManager",
      "functor":"Manager",
      "comment":"返回请求结果，日志落盘",
      "functors":"EventToResponse,LogDump",
      "config":{
        "open":1,
        "mode":"parallel"
      }
    },
    {
      "functor-comment":"functor 配置"
    },
    {
      "name":"SessionRecall",
      "functor":"SessionRecall",
      "exceptNum":100,
      "规则表达示":"种子过滤规则",
      "express":"actDay<30 || version>8 || \"man\".equals(sex)",
      "seedExpress":"dr>10 && views>1 || likes>0 || pay>1",
      "config":{
        "open":1
      }
    },
    {
      "name":"GetToken",
      "functor":"GetToken",
      "config":{
        "open":1
      }
    },
    {
      "name":"RequestToUserContext",
      "functor":"RequestToUserContext",
      "config":{
        "open":1
      }
    },
    {
      "name":"ABExpParam",
      "functor":"ABExpParam",
      "config":{
        "open":1
      }
    },
    {
      "name":"SimpleFeature",
      "functor":"SimpleFeature",
      "config":{
        "open":1
      }
    },
    {
      "name":"SexFeature",
      "functor":"SexFeature",
      "config":{
        "open":1
      }
    },
    {
      "name":"SimpleRedis",
      "functor":"SimpleRedis",
      "config":{
        "open":1
      }
    },
    {
      "name":"SessionFeature",
      "functor":"SessionFeature",
      "config":{
        "open":1
      }
    },
    {
      "name":"PosRecall",
      "functor":"PosRecall",
      "config":{
        "open":1
      }
    },
    {
      "name":"SimpleFilter",
      "functor":"SimpleFilter",
      "config":{
        "open":1
      }
    },
    {
      "name":"BizFilter",
      "functor":"BizFilter",
      "config":{
        "open":1
      }
    },
    {
      "name":"CoverFilter",
      "functor":"SimpleFilter",
      "comment":"规则表达示圏用户",
      "express":"highActive == true && \"ios\".equals(os) && offset<100",
      "config":{
        "open":1
      }
    },
    {
      "name":"ChnAdjust1",
      "functor":"ChnAdjust",
      "config":{
        "chn":"SimpleRedis",
        "comment":"规则表达示圏用户",
        "express":"lowActive == true"
      }
    },
    {
      "name":"ChnAdjust2",
      "functor":"ChnAdjust",
      "config":{
        "chn":"SimpleRedis",
        "comment":"规则表达示圏用户",
        "express":"lowActive == true"
      }
    },
    {
      "name":"ChnPosition",
      "functor":"ChnPosition",
      "config":{
        "chnPos":"SessionRecall:4,5,6"
      }
    },
    {
      "name":"EventToResponse",
      "functor":"EventToResponse",
      "open":1
    },
    {
      "name":"LogDump",
      "functor":"LogDump",
      "open":1
    }
  ]
}